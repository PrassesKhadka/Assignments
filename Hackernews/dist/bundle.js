(()=>{"use strict";var e=function(e,t,n,r){return new(n||(n=Promise))((function(c,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function o(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}s((r=r.apply(e,t||[])).next())}))},t=function(e,t){var n,r,c,a,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(c=2&o[0]?r.return:o[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,o[1])).done)return c;switch(r=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((c=(c=i.trys).length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){i.label=o[1];break}if(6===o[0]&&i.label<c[1]){i.label=c[1],c=o;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(o);break}c[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function n(){return{getStories:function(){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},getStory:function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(n,".json?print=pretty"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},getComment:function(n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,fetch("https://hacker-news.firebaseio.com/v0/item/".concat(n,".json?print=pretty"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))}}}var r=function(e,t,n,r){return new(n||(n=Promise))((function(c,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function o(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}s((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,c,a,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(n=1,r&&(c=2&o[0]?r.return:o[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,o[1])).done)return c;switch(r=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((c=(c=i.trys).length>0&&c[c.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){i.label=o[1];break}if(6===o[0]&&i.label<c[1]){i.label=c[1],c=o;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(o);break}c[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=function(e){void 0===e&&(e=10);var t=1,a=1,i=[],o=[],s=[],l={};function u(){return r(this,void 0,void 0,(function(){var a,u,d,m,f,p=this;return c(this,(function(v){switch(v.label){case 0:return 0!==i.length?[3,2]:[4,n().getStories()];case 1:i=v.sent(),v.label=2;case 2:return a=(t-1)*e,u=t*e,o=i.slice(a,u),l[t.toString()]?(s=l[t],[3,7]):[3,3];case 3:return[4,o.map((function(e){return r(p,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,n().getStory(e)];case 1:return[2,t.sent()]}}))}))}))];case 4:return d=v.sent(),[4,Promise.all(d)];case 5:return s=v.sent(),m=l,f=t.toString(),[4,Promise.all(d)];case 6:m[f]=v.sent(),v.label=7;case 7:return[2]}}))}))}function d(e){return r(this,void 0,void 0,(function(){var t,a=this;return c(this,(function(i){return document.querySelector(".inner-comment-box"),(t=document.createElement("div")).classList.add("inner-comment-box"),e.forEach((function(e){return r(a,void 0,void 0,(function(){function a(){return r(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return 0!==i.kids.length?[3,1]:(h.removeEventListener("click",a),[3,3]);case 1:return[4,d(i.kids)];case 2:e=t.sent(),o.append(e),t.label=3;case 3:return h.removeEventListener("click",a),[2]}}))}))}var i,o,s,l,u,m,f,p,v,h;return c(this,(function(r){switch(r.label){case 0:return[4,n().getComment(e)];case 1:return i=r.sent(),(o=document.createElement("div")).classList.add("comment"),(s=document.createElement("div")).classList.add("user-icon"),(l=document.createElement("span")).classList.add("material-icons"),l.textContent="person",s.appendChild(l),(u=document.createElement("div")).classList.add("user-details"),(m=document.createElement("p")).textContent="".concat(i.by),m.classList.add("user-name"),f=document.createElement("p"),p=new Date(i.time).toLocaleString(),f.textContent="Time: ".concat(p),f.classList.add("comment-text"),u.append(m,f),(v=document.createElement("div")).classList.add("comment-text"),v.innerHTML=i.text,(h=document.createElement("div")).classList.add("reply-icon"),h.innerHTML='\n          <span class="material-icons">comment</span>\n          '.concat(i.kids?"<span>".concat(i.kids.length,"</span>"):"<span>0</span>","\n      "),o.append(s,u,v,h),t.append(o),h.addEventListener("click",a),[2]}}))}))})),[2,t]}))}))}return{indexNo:t,nextPage:function(){t=9+(a=a%10+1)},previousPage:function(){a--,(t=a-9)<1&&(t=(a=10)-9)},goToIndex:function(e){return t=e},render:function(){return r(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=document.querySelector(".inner-container"),function(){for(var t=document.querySelector(".inner-container"),n=0;n<e;n++){var r=document.createElement("div");r.innerHTML='\n                <div class="box">\n                    <div class="skeleton skeleton-text"></div>\n                    <div class="skeleton skeleton-text"></div>\n                    <div class="skeleton skeleton-text"></div>\n                    <div class="skeleton skeleton-text"></div>\n                    <div class="skeleton skeleton-text"></div>\n                </div>\n            ',t.appendChild(r)}}(),[4,u()];case 1:return n.sent(),t.innerHTML="",s.forEach((function(e){var n=document.createElement("div");n.classList.add("box");var a=document.createElement("div");a.classList.add("upper-box");var i=document.createElement("div");i.classList.add("lower-box");var o=document.createElement("div");o.classList.add("title"),o.textContent=e.title;var s=document.createElement("div");s.innerHTML='<div class="author"><span class="material-icons">person</span> '.concat(e.by,"</div>");var l=document.createElement("div");l.classList.add("comment-box"),l.innerHTML='<span class="material-icons">comment</span><span>'.concat(e.kids?e.kids.length:"0","</span>");var u=document.createElement("p"),m=new Date(e.time).toLocaleString();u.textContent="".concat(m);var f=document.createElement("div"),p=document.createElement("a");p.href=e.url,p.target="_blank",p.innerHTML='<span class="material-icons">open_in_new</span>',f.append(p),a.append(o),i.append(s,l,u,f),n.append(a,i),t.appendChild(n),o.addEventListener("click",(function(){!function(e){r(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,l,u,m,f;return c(this,(function(c){switch(c.label){case 0:return t=document.querySelector(".inner-container"),(n=document.createElement("div")).classList.add("comment-box"),t.innerHTML="",(r=document.createElement("div")).classList.add("box"),(a=document.createElement("h2")).textContent=e.title,(i=document.createElement("p")).textContent="By: ".concat(e.by),o=document.createElement("p"),(s=document.createElement("a")).href=e.url,s.textContent=e.url,o.appendChild(document.createTextNode("URL: ")),o.appendChild(s),l=document.createElement("p"),u=new Date(e.time).toLocaleString(),l.textContent="Time: ".concat(u),(m=document.createElement("p")).textContent="no.of comments: ".concat(e.kids.length),r.appendChild(a),r.appendChild(i),r.appendChild(o),r.appendChild(l),r.appendChild(m),0!==e.kids.length?[3,1]:(n.innerHTML="No Comments to Show",[3,3]);case 1:return[4,d(e.kids)];case 2:f=c.sent(),n.append(f),c.label=3;case 3:return t.append(r,n),[2]}}))}))}(e)}))})),[2]}}))}))}}}(5),i=a.nextPage,o=a.previousPage,s=a.goToIndex,l=a.render,u=document.querySelector(".inner-container"),d=document.querySelectorAll(".nav-btn"),m=document.querySelector(".next-btn"),f=document.querySelector(".previous-btn");d.forEach((function(e,t){e.addEventListener("click",(function(){u.innerHTML="",s(t+1),l(),d.forEach((function(e){e.classList.remove("active")})),e.classList.add("active")}))})),m.addEventListener("click",(function(){u.innerHTML="",i(),l();var e=1;d.forEach((function(t,n){t.classList.contains("active")&&(e=n),t.classList.remove("active")})),d.forEach((function(t,n){n===e+1&&t.classList.add("active")}))})),f.addEventListener("click",(function(){u.innerHTML="",o(),l();var e=1;d.forEach((function(t,n){t.classList.contains("active")&&(e=n),t.classList.remove("active")})),d.forEach((function(t,n){0!=e&&n===e-1&&t.classList.add("active"),0===e&&0===n&&t.classList.add("active")}))})),l()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBTSxFQUNWSixFQUFZaEQsU0FBUSxTQUFDcUQsRUFBSXZCLEdBQ2xCdUIsRUFBSXZELFVBQVV5RCxTQUFTLFlBQ3RCSCxFQUFNdEIsR0FFVnVCLEVBQUl2RCxVQUFVd0QsT0FBTyxTQUN6QixJQUNBTixFQUFZaEQsU0FBUSxTQUFDcUQsRUFBSXZCLEdBQ2xCQSxJQUFJc0IsRUFBTSxHQUVUQyxFQUFJdkQsVUFBVUMsSUFBSSxTQUcxQixHQUNKLElBQ0FvRCxFQUFTNUIsaUJBQWlCLFNBQVEsV0FDOUJ3QixFQUFnQjFCLFVBQVUsR0FDMUJJLElBQ0FHLElBR0EsSUFBSXdCLEVBQU0sRUFDVkosRUFBWWhELFNBQVEsU0FBQ3FELEVBQUl2QixHQUNsQnVCLEVBQUl2RCxVQUFVeUQsU0FBUyxZQUN0QkgsRUFBTXRCLEdBRVZ1QixFQUFJdkQsVUFBVXdELE9BQU8sU0FDekIsSUFDQU4sRUFBWWhELFNBQVEsU0FBQ3FELEVBQUl2QixHQUNYLEdBQVBzQixHQUFZdEIsSUFBSXNCLEVBQU0sR0FFckJDLEVBQUl2RCxVQUFVQyxJQUFJLFVBRVgsSUFBUnFELEdBQWlCLElBQUp0QixHQUVadUIsRUFBSXZELFVBQVVDLElBQUksU0FHMUIsR0FDSixJQUdBNkIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2hhY2tlcm5ld3MvLi9zcmMvYXBpL2RhdGEudHMiLCJ3ZWJwYWNrOi8vaGFja2VybmV3cy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9oYWNrZXJuZXdzLy4vc3JjL2ZhY3Rvcmllcy9wYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElyZXR1cm5HZXRDb21tZW50cywgSXJldHVybkdldFN0b3J5IH0gZnJvbSBcIi4uL2ludGVyZmFjZVwiO1xuXG5pbnRlcmZhY2UgSXJldHVybkdldERhdGF7XG4gICAgZ2V0U3RvcmllczooKT0+UHJvbWlzZTxudW1iZXJbXT47XG4gICAgZ2V0U3Rvcnk6KGlkOm51bWJlcik9PlByb21pc2U8SXJldHVybkdldFN0b3J5PjtcbiAgICBnZXRDb21tZW50OihpZDpudW1iZXIpPT5Qcm9taXNlPElyZXR1cm5HZXRDb21tZW50cz47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhKCk6SXJldHVybkdldERhdGF7XG4gICAgLy8gZW5kcG9pbnRzOlxuXG4gICAgLy8gdG9wIDUwMCBzdG9yaWVzIGVuZHBvaW50czpcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRTdG9yaWVzKCk6IFByb21pc2U8bnVtYmVyW10+e1xuICAgICAgICBjb25zdCByZXNwb25zZT0gYXdhaXQgZmV0Y2goXCJodHRwczovL2hhY2tlci1uZXdzLmZpcmViYXNlaW8uY29tL3YwL3RvcHN0b3JpZXMuanNvbj9wcmludD1wcmV0dHlcIilcbiAgICAgICAgY29uc3QgZGF0YT1hd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8vIGVhY2ggc3RvcnlcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRTdG9yeShpZDpudW1iZXIpOlByb21pc2U8SXJldHVybkdldFN0b3J5PntcbiAgICAgICAgY29uc3QgcmVzcG9uc2U9YXdhaXQgZmV0Y2goYGh0dHBzOi8vaGFja2VyLW5ld3MuZmlyZWJhc2Vpby5jb20vdjAvaXRlbS8ke2lkfS5qc29uP3ByaW50PXByZXR0eWApXG4gICAgICAgIGNvbnN0IGRhdGE9YXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvLyBlYWNoIGNvbW1lbnRcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRDb21tZW50KGlkOm51bWJlcik6UHJvbWlzZTxJcmV0dXJuR2V0Q29tbWVudHM+e1xuICAgICAgICBjb25zdCByZXNwb25zZT1hd2FpdCBmZXRjaChgaHR0cHM6Ly9oYWNrZXItbmV3cy5maXJlYmFzZWlvLmNvbS92MC9pdGVtLyR7aWR9Lmpzb24/cHJpbnQ9cHJldHR5YClcbiAgICAgICAgY29uc3QgZGF0YT1hd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge2dldFN0b3JpZXMsZ2V0U3RvcnksZ2V0Q29tbWVudH1cbn1cbiIsImltcG9ydCB7IGdldERhdGEgfSBmcm9tIFwiLi9hcGkvZGF0YVwiO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gXCIuL2ZhY3Rvcmllcy9wYWdlXCI7XG5cbi8vIEtlZXBpbmcgNSBzdG9yaWVzIG9uIGVhY2ggcGFnZTtcbmNvbnN0IHsgbmV4dFBhZ2UsIHByZXZpb3VzUGFnZSwgZ29Ub0luZGV4LCByZW5kZXIgfSA9IFBhZ2UoNSk7XG5cbi8vIHNlbGVjdG9yczpcbmNvbnN0IGlubmVyX2NvbnRhaW5lcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmlubmVyLWNvbnRhaW5lclwiKVxuY29uc3QgbmF2aWdhdGlvbnM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXYtYnRuXCIpXG5jb25zdCBuZXh0X2J0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5leHQtYnRuXCIpXG5jb25zdCBwcmV2X2J0bj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZpb3VzLWJ0blwiKVxuXG5cbi8vIEZvciBldmVudCBMaXN0ZW5lcnMgXG5uYXZpZ2F0aW9ucy5mb3JFYWNoKChlbGVtZW50OkhUTUxCdXR0b25FbGVtZW50LGluZGV4Om51bWJlcik9PntcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgpPT57XG4gICAgICAgIGlubmVyX2NvbnRhaW5lci5pbm5lckhUTUw9XCJcIlxuICAgICAgICBnb1RvSW5kZXgoaW5kZXgrMSlcbiAgICAgICAgcmVuZGVyKClcblxuICAgICAgICAvLyBhZGQgYWN0aXZlIGNsYXNzIHRvIHNob3ctPnRoYXQgc3BlY2lmaWMgYnV0dG9uIGFjdGl2ZSB3aGVuIGNsaWNrZWQ7XG4gICAgICAgIG5hdmlnYXRpb25zLmZvckVhY2goKGJ0bik9PntcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG5cbiAgICAgICAgfSlcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpIFxuICAgIH0pXG59KVxuXG5uZXh0X2J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKT0+e1xuICAgIGlubmVyX2NvbnRhaW5lci5pbm5lckhUTUw9XCJcIlxuICAgIG5leHRQYWdlKClcbiAgICByZW5kZXIoKVxuXG4gICAgLy8gVG8gYWRkIGFjdGl2ZSBjbGFzcyB0byB0aGUgYnV0dG9uc1xuICAgIGxldCBpbmRleD0xO1xuICAgIG5hdmlnYXRpb25zLmZvckVhY2goKGJ0bixpKT0+e1xuICAgICAgICBpZihidG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKXtcbiAgICAgICAgICAgIGluZGV4PWlcbiAgICAgICAgfVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgIH0pXG4gICAgbmF2aWdhdGlvbnMuZm9yRWFjaCgoYnRuLGkpPT57XG4gICAgICAgIGlmKGk9PT1pbmRleCsxKVxuICAgICAgICB7XG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICB9XG5cbiAgICB9KVxufSlcbnByZXZfYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgpPT57XG4gICAgaW5uZXJfY29udGFpbmVyLmlubmVySFRNTD1cIlwiXG4gICAgcHJldmlvdXNQYWdlKClcbiAgICByZW5kZXIoKVxuXG4gICAgLy8gVG8gYWRkIGFjdGl2ZSBjbGFzcyB0byB0aGUgYnV0dG9uc1xuICAgIGxldCBpbmRleD0xO1xuICAgIG5hdmlnYXRpb25zLmZvckVhY2goKGJ0bixpKT0+e1xuICAgICAgICBpZihidG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKXtcbiAgICAgICAgICAgIGluZGV4PWlcbiAgICAgICAgfVxuICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgIH0pXG4gICAgbmF2aWdhdGlvbnMuZm9yRWFjaCgoYnRuLGkpPT57XG4gICAgICAgIGlmKGluZGV4IT0wICYmIGk9PT1pbmRleC0xKVxuICAgICAgICB7XG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICB9XG4gICAgICAgIGlmKGluZGV4PT09MCAmJiBpPT09MClcbiAgICAgICAge1xuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgfVxuXG4gICAgfSlcbn0pXG5cblxucmVuZGVyKCk7XG4iLCJpbXBvcnQgeyBsb3dlckNhc2UgfSBmcm9tIFwiY3lwcmVzcy90eXBlcy9sb2Rhc2hcIjtcbmltcG9ydCB7IGdldERhdGEgfSBmcm9tIFwiLi4vYXBpL2RhdGFcIjtcbmltcG9ydCB7IElyZXR1cm5HZXRDb21tZW50cywgSXJldHVybkdldFN0b3J5IH0gZnJvbSBcIi4uL2ludGVyZmFjZVwiO1xuXG5pbnRlcmZhY2UgSXJldHVyblBhZ2Uge1xuICBpbmRleE5vOiBudW1iZXI7XG4gIG5leHRQYWdlOiAoKSA9PiB2b2lkO1xuICBwcmV2aW91c1BhZ2U6ICgpID0+IHZvaWQ7XG4gIGdvVG9JbmRleDogKG5vOiBudW1iZXIpID0+IHZvaWQ7XG4gIHJlbmRlcjogKCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIElzdG9yeUNhY2hlIHtcbiAgW2tleTogc3RyaW5nXTogSXJldHVybkdldFN0b3J5W107XG59XG5cbi8vIGFzIGRlZmF1bHQgZWFjaCBpbmRleCBoYXMgMTAgc3Rvcmllc1xuZXhwb3J0IGZ1bmN0aW9uIFBhZ2UoZWFjaEluZGV4OiBudW1iZXIgPSAxMCk6IElyZXR1cm5QYWdlIHtcbiAgLy8gYnV0dG9uc1xuICBsZXQgdG90YWxJbmRleCA9IDUwO1xuICBsZXQgaW5kZXhObyA9IDE7XG4gIC8vcGFnZSBpcyB0aGUgcGFnZSBpLmUgbmF2LWJhciAxLTEwIGlzIHBhZ2UgMSBhbm90aGVyIDExLTIwIGlzIHBhZ2UgMiBzaW1pbGFybHkgMTAgcGFnZXNcbiAgbGV0IHRvdGFsUGFnZSA9IDEwO1xuICBsZXQgcGFnZSA9IDE7XG5cbiAgLy8gYWxsIHN0b3JpZXNcbiAgbGV0IHN0b3JpZXM6IG51bWJlcltdID0gW107XG4gIC8vIGNob3NlbiBzdG9yaWVzIGZvciB0aGlzIHBhZ2VcbiAgbGV0IHRvcFN0b3JpZXM6IG51bWJlcltdID0gW107XG4gIGxldCBzdG9yeTogSXJldHVybkdldFN0b3J5W10gPSBbXTtcbiAgbGV0IHN0b3J5Q2FjaGU6IElzdG9yeUNhY2hlID0ge307XG5cbiAgY29uc3QgbmV4dFBhZ2UgPSAoKSA9PiB7XG4gICAgcGFnZSA9IChwYWdlICUgdG90YWxQYWdlKSArIDE7XG4gICAgaW5kZXhObyA9IHBhZ2UgKyA5O1xuICB9O1xuICBjb25zdCBwcmV2aW91c1BhZ2UgPSAoKSA9PiB7XG4gICAgcGFnZS0tO1xuICAgIGluZGV4Tm8gPSBwYWdlIC0gOTtcbiAgICBpZiAoaW5kZXhObyA8IDEpIHtcbiAgICAgIHBhZ2UgPSB0b3RhbFBhZ2U7XG4gICAgICBpbmRleE5vID0gcGFnZSAtIDk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdvVG9JbmRleCA9IChubzogbnVtYmVyKSA9PiAoaW5kZXhObyA9IG5vKTtcblxuICAvLyBkYXRhIGZpbHRlcmVkIGJhc2VkIG9uIHRoZSBpbmRleE5vLiBFZzpmb3IgZmlyc3QgcGFnZSBvbmx5IDAtOSBkYXRhIGdpdmVuXG4gIGFzeW5jIGZ1bmN0aW9uIGRhdGFGaWx0ZXIoKSB7XG4gICAgLy8gRmV0Y2ggdGhlIDUwMCB0b3Agc3Rvcmllc1xuICAgIGlmIChzdG9yaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc3RvcmllcyA9IGF3YWl0IGdldERhdGEoKS5nZXRTdG9yaWVzKCk7XG4gICAgfVxuICAgIGxldCBzdGFydCA9IChpbmRleE5vIC0gMSkgKiBlYWNoSW5kZXg7XG4gICAgbGV0IGVuZCA9IGluZGV4Tm8gKiBlYWNoSW5kZXg7XG4gICAgLy8gT25seSBrZWVwIHRoZSBzdG9yaWVzIHRoYXQgd2UgbmVlZCBpbiB0aGlzIHBhZ2UgI2lkJ3NcbiAgICB0b3BTdG9yaWVzID0gc3Rvcmllcy5zbGljZShzdGFydCwgZW5kKTtcblxuICAgIC8vIGZldGNoIHRoZSBzdG9yeVxuXG4gICAgLy8gY2FjaGluZ1xuICAgIGlmIChzdG9yeUNhY2hlW2luZGV4Tm8udG9TdHJpbmcoKV0pIHtcbiAgICAgIHN0b3J5ID0gc3RvcnlDYWNoZVtpbmRleE5vXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3RvcnlQcm9taXNlID0gYXdhaXQgdG9wU3Rvcmllcy5tYXAoYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGVhY2hTdG9yeSA9IGF3YWl0IGdldERhdGEoKS5nZXRTdG9yeShpZCk7XG4gICAgICAgIHJldHVybiBlYWNoU3Rvcnk7XG4gICAgICB9KTtcbiAgICAgIHN0b3J5ID0gYXdhaXQgUHJvbWlzZS5hbGwoc3RvcnlQcm9taXNlKTtcbiAgICAgIC8vIGNhY2hlXG4gICAgICBzdG9yeUNhY2hlW2luZGV4Tm8udG9TdHJpbmcoKV0gPSBhd2FpdCBQcm9taXNlLmFsbChzdG9yeVByb21pc2UpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRvIHJlbmRlciBza2VsZXRvbiBsb2FkaW5nIHBhZ2U6XG4gIGZ1bmN0aW9uIHJlbmRlclNrZWxldG9uKCkge1xuICAgIGNvbnN0IGlubmVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbm5lci1jb250YWluZXJcIik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlYWNoSW5kZXg7IGkrKykge1xuICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJveFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2tlbGV0b24gc2tlbGV0b24tdGV4dFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgYDtcbiAgICAgIGlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gcmVuZGVyQ29tbWVudHMoY29tbWVudHM6IG51bWJlcltdKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xuICAgIC8vIHNlbGVjdG9yXG4gICAgY29uc3QgaW5uZXJfY29tbWVudF9ib3g9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbm5lci1jb21tZW50LWJveFwiKVxuICAgIFxuICAgIC8vIGNyZWF0aW5nIGEgZGl2IHRvIHJldHVybiBhZnRlciBhcHBlbmRpbmdcbiAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJpbm5lci1jb21tZW50LWJveFwiKVxuXG4gICAgY29tbWVudHMuZm9yRWFjaChhc3luYyAoaWQ6IG51bWJlcikgPT4ge1xuXG4gICAgICAvLyBkYXRhIGZldGNoXG4gICAgICBjb25zdCBkYXRhOiBJcmV0dXJuR2V0Q29tbWVudHMgPSBhd2FpdCBnZXREYXRhKCkuZ2V0Q29tbWVudChpZCk7XG5cbiAgICAgIC8vIENyZWF0ZSBjb250YWluZXIgZGl2XG4gICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJjb21tZW50XCIpO1xuXG4gICAgICAvLyBDcmVhdGUgdXNlciBJY29uXG4gICAgICBjb25zdCB1c2VySWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB1c2VySWNvbi5jbGFzc0xpc3QuYWRkKFwidXNlci1pY29uXCIpO1xuXG4gICAgICAvLyBDcmVhdGUgYW4gaWNvbiBlbGVtZW50IChNYXRlcmlhbCBJY29ucyB1c2VyIGljb24pXG4gICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICBpY29uLmNsYXNzTGlzdC5hZGQoXCJtYXRlcmlhbC1pY29uc1wiKTtcbiAgICAgIGljb24udGV4dENvbnRlbnQgPSBcInBlcnNvblwiOyAvLyBTZXQgdGhlIE1hdGVyaWFsIEljb25zIGNsYXNzIGZvciB0aGUgdXNlciBpY29uXG5cbiAgICAgIC8vIEFwcGVuZCB0aGUgaWNvbiB0byB0aGUgdXNlciBpY29uIGRpdlxuICAgICAgdXNlckljb24uYXBwZW5kQ2hpbGQoaWNvbik7XG5cbiAgICAgIC8vIENyZWF0ZSB1c2VyIGRldGFpbHNcbiAgICAgIGNvbnN0IHVzZXJEZXRhaWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHVzZXJEZXRhaWxzLmNsYXNzTGlzdC5hZGQoXCJ1c2VyLWRldGFpbHNcIik7XG5cbiAgICAgIC8vIENyZWF0ZSBhdXRob3IgZWxlbWVudFxuICAgICAgY29uc3QgYXV0aG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgYXV0aG9yRWxlbWVudC50ZXh0Q29udGVudCA9IGAke2RhdGEuYnl9YDtcbiAgICAgIGF1dGhvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInVzZXItbmFtZVwiKTtcblxuICAgICAgLy8gQ3JlYXRlIHRpbWUgZWxlbWVudFxuICAgICAgY29uc3QgdGltZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBuZXcgRGF0ZShkYXRhLnRpbWUpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICB0aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGBUaW1lOiAke2Zvcm1hdHRlZFRpbWV9YDtcbiAgICAgIHRpbWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJjb21tZW50LXRleHRcIik7XG5cbiAgICAgIHVzZXJEZXRhaWxzLmFwcGVuZChhdXRob3JFbGVtZW50LCB0aW1lRWxlbWVudCk7XG5cbiAgICAgIC8vIENyZWF0ZSBjb21tZW50LXRleHQgZWxlbWVudFxuICAgICAgY29uc3QgdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbW1lbnQtdGV4dFwiKTtcbiAgICAgIHRleHRFbGVtZW50LmlubmVySFRNTCA9IGRhdGEudGV4dDtcblxuICAgICAgLy8gUmVwbHkgZWxlbWVudFxuICAgICAgY29uc3QgcmVwbHlJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHJlcGx5SWNvbi5jbGFzc0xpc3QuYWRkKFwicmVwbHktaWNvblwiKTtcbiAgICAgIHJlcGx5SWNvbi5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmNvbW1lbnQ8L3NwYW4+XG4gICAgICAgICAgJHtkYXRhLmtpZHMgPyBgPHNwYW4+JHtkYXRhLmtpZHMubGVuZ3RofTwvc3Bhbj5gIDogYDxzcGFuPjA8L3NwYW4+YH1cbiAgICAgIGA7XG5cbiAgICAgIC8vIEFwcGVuZCBlbGVtZW50cyB0byB0aGUgY29udGFpbmVyXG4gICAgICBkaXYuYXBwZW5kKHVzZXJJY29uLCB1c2VyRGV0YWlscywgdGV4dEVsZW1lbnQsIHJlcGx5SWNvbik7XG4gICAgICBub2RlLmFwcGVuZChkaXYpO1xuXG4gICAgICAvLyBFdmVudCBMaXN0ZW5lclxuICAgICAgYXN5bmMgZnVuY3Rpb24gaGFuZGxlT25Db21tZW50Q2xpY2soKSB7XG4gICAgICAgIGlmIChkYXRhLmtpZHMubGVuZ3RoID09PSAwKVxuICAgICAgICAgIHJlcGx5SWNvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT25Db21tZW50Q2xpY2spO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBub2RlID0gYXdhaXQgcmVuZGVyQ29tbWVudHMoZGF0YS5raWRzKTtcbiAgICAgICAgICBkaXYuYXBwZW5kKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJlcGx5SWNvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlT25Db21tZW50Q2xpY2spO1xuICAgICAgfVxuXG4gICAgICByZXBseUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZU9uQ29tbWVudENsaWNrKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gcmVuZGVyRGV0YWlsUGFnZShlbGVtZW50OiBJcmV0dXJuR2V0U3RvcnkpIHtcbiAgICBjb25zdCBpbm5lckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5uZXItY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IGNvbW1lbnRCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbW1lbnRCb3guY2xhc3NMaXN0LmFkZChcImNvbW1lbnQtYm94XCIpO1xuXG4gICAgaW5uZXJDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAvLyBDcmVhdGUgY29udGFpbmVyIGRpdlxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJib3hcIik7XG5cbiAgICAvLyBDcmVhdGUgdGl0bGUgZWxlbWVudFxuICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICB0aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBlbGVtZW50LnRpdGxlO1xuXG4gICAgLy8gQ3JlYXRlIGF1dGhvciBlbGVtZW50XG4gICAgY29uc3QgYXV0aG9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGF1dGhvckVsZW1lbnQudGV4dENvbnRlbnQgPSBgQnk6ICR7ZWxlbWVudC5ieX1gO1xuXG4gICAgLy8gQ3JlYXRlIFVSTCBlbGVtZW50XG4gICAgY29uc3QgdXJsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IHVybExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICB1cmxMaW5rLmhyZWYgPSBlbGVtZW50LnVybDtcbiAgICB1cmxMaW5rLnRleHRDb250ZW50ID0gZWxlbWVudC51cmw7XG4gICAgdXJsRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlVSTDogXCIpKTtcbiAgICB1cmxFbGVtZW50LmFwcGVuZENoaWxkKHVybExpbmspO1xuXG4gICAgLy8gQ3JlYXRlIHRpbWUgZWxlbWVudFxuICAgIGNvbnN0IHRpbWVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IG5ldyBEYXRlKGVsZW1lbnQudGltZSkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICB0aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGBUaW1lOiAke2Zvcm1hdHRlZFRpbWV9YDtcblxuICAgIC8vIENyZWF0ZSBhdXRob3IgZWxlbWVudFxuICAgIGNvbnN0IGNvbW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29tbWVudEVsZW1lbnQudGV4dENvbnRlbnQgPSBgbm8ub2YgY29tbWVudHM6ICR7ZWxlbWVudC5raWRzLmxlbmd0aH1gO1xuXG4gICAgLy8gQXBwZW5kIGVsZW1lbnRzIHRvIHRoZSBjb250YWluZXJcbiAgICBkaXYuYXBwZW5kQ2hpbGQodGl0bGVFbGVtZW50KTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoYXV0aG9yRWxlbWVudCk7XG4gICAgZGl2LmFwcGVuZENoaWxkKHVybEVsZW1lbnQpO1xuICAgIGRpdi5hcHBlbmRDaGlsZCh0aW1lRWxlbWVudCk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbW1lbnRFbGVtZW50KTtcblxuICAgIC8vIE5vdyBGb3IgY29tbWVudHM6XG4gICAgaWYgKGVsZW1lbnQua2lkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbW1lbnRCb3guaW5uZXJIVE1MID0gXCJObyBDb21tZW50cyB0byBTaG93XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBhd2FpdCByZW5kZXJDb21tZW50cyhlbGVtZW50LmtpZHMpO1xuICAgICAgY29tbWVudEJveC5hcHBlbmQobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gQXBwZW5kIGNvbnRhaW5lciB0byB0aGUgYm9keVxuICAgIGlubmVyQ29udGFpbmVyLmFwcGVuZChkaXYsIGNvbW1lbnRCb3gpO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIC8vIHNlbGVjdG9yc1xuICAgIGNvbnN0IGlubmVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbm5lci1jb250YWluZXJcIik7XG5cbiAgICAvLyBSZW5kZXJzIHNrZWxldG9uIGxvYWRpbmdcbiAgICByZW5kZXJTa2VsZXRvbigpO1xuXG4gICAgLy8gZmlsdGVycyBhbmQgZ2l2ZXMgdXMgdGhlIGRhdGEgdGhhdCBzaG91bGQgYmUgZmV0Y2hlZCBvbiB0aGF0IHBhZ2U7XG4gICAgYXdhaXQgZGF0YUZpbHRlcigpO1xuXG4gICAgLy8gY2xlYXJzIHRoZSByZW5kZXIgY2F1c2VkIGJ5IHNrZWxldG9uLWxvYWRpbmdcbiAgICBpbm5lckNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgc3RvcnkuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBkaXZcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImJveFwiKTtcblxuICAgICAgY29uc3QgdXBwZXJfYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHVwcGVyX2JveC5jbGFzc0xpc3QuYWRkKFwidXBwZXItYm94XCIpO1xuICAgICAgY29uc3QgbG93ZXJfYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGxvd2VyX2JveC5jbGFzc0xpc3QuYWRkKFwibG93ZXItYm94XCIpO1xuXG4gICAgICAvLyBDcmVhdGUgdGl0bGUgZWxlbWVudFxuICAgICAgY29uc3QgdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRpdGxlRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIilcbiAgICAgIHRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGVsZW1lbnQudGl0bGU7XG5cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGF1dGhvciBlbGVtZW50XG4gICAgICBjb25zdCBhdXRob3JFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF1dGhvckVsZW1lbnQuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJhdXRob3JcIj48c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+cGVyc29uPC9zcGFuPiAke2VsZW1lbnQuYnl9PC9kaXY+YDtcblxuICAgICAgLy8gQ3JlYXRlIGNvbW1lbnQgZWxlbWVudFxuICAgICAgY29uc3QgY29tbWVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29tbWVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImNvbW1lbnQtYm94XCIpXG4gICAgICBjb21tZW50RWxlbWVudC5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmNvbW1lbnQ8L3NwYW4+PHNwYW4+JHtlbGVtZW50LmtpZHMgPyBlbGVtZW50LmtpZHMubGVuZ3RoIDogJzAnfTwvc3Bhbj5gO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgdGltZSBlbGVtZW50XG4gICAgIFxuICAgICAgY29uc3QgdGltZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBuZXcgRGF0ZShlbGVtZW50LnRpbWUpLnRvTG9jYWxlU3RyaW5nKCk7XG4gICAgICB0aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGAke2Zvcm1hdHRlZFRpbWV9YDtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIFVSTCBlbGVtZW50XG4gICAgICBjb25zdCB1cmxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHVybExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIHVybExpbmsuaHJlZiA9IGVsZW1lbnQudXJsO1xuICAgICAgdXJsTGluay50YXJnZXQgPSBcIl9ibGFua1wiO1xuICAgICAgdXJsTGluay5pbm5lckhUTUw9IGA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+b3Blbl9pbl9uZXc8L3NwYW4+YDtcbiAgICAgIHVybEVsZW1lbnQuYXBwZW5kKHVybExpbmspO1xuICAgICAgXG4gICAgICAvLyBBcHBlbmQgY29udGFpbmVyIHRvIHRoZSBib2R5XG4gICAgICB1cHBlcl9ib3guYXBwZW5kKHRpdGxlRWxlbWVudClcbiAgICAgIGxvd2VyX2JveC5hcHBlbmQoYXV0aG9yRWxlbWVudCxjb21tZW50RWxlbWVudCx0aW1lRWxlbWVudCx1cmxFbGVtZW50KVxuICAgICAgZGl2LmFwcGVuZCh1cHBlcl9ib3gsbG93ZXJfYm94KVxuICAgICAgaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICAgICAgLy8gRXZlbnQgTGlzdGVuZXJzXG4gICAgICB0aXRsZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcmVuZGVyRGV0YWlsUGFnZShlbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHsgaW5kZXhObywgbmV4dFBhZ2UsIHByZXZpb3VzUGFnZSwgZ29Ub0luZGV4LCByZW5kZXIgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXREYXRhIiwiZ2V0U3RvcmllcyIsImZldGNoIiwianNvbiIsImdldFN0b3J5IiwiaWQiLCJnZXRDb21tZW50IiwiZWFjaEluZGV4IiwiaW5kZXhObyIsInBhZ2UiLCJzdG9yaWVzIiwidG9wU3RvcmllcyIsInN0b3J5Iiwic3RvcnlDYWNoZSIsImRhdGFGaWx0ZXIiLCJsZW5ndGgiLCJzdGFydCIsImVuZCIsInNsaWNlIiwidG9TdHJpbmciLCJtYXAiLCJzdG9yeVByb21pc2UiLCJQcm9taXNlIiwiYWxsIiwicmVuZGVyQ29tbWVudHMiLCJjb21tZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm5vZGUiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZm9yRWFjaCIsImhhbmRsZU9uQ29tbWVudENsaWNrIiwiZGF0YSIsImtpZHMiLCJyZXBseUljb24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGl2IiwiYXBwZW5kIiwidXNlckljb24iLCJpY29uIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInVzZXJEZXRhaWxzIiwiYXV0aG9yRWxlbWVudCIsImJ5IiwidGltZUVsZW1lbnQiLCJmb3JtYXR0ZWRUaW1lIiwiRGF0ZSIsInRpbWUiLCJ0b0xvY2FsZVN0cmluZyIsInRleHRFbGVtZW50IiwiaW5uZXJIVE1MIiwidGV4dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXh0UGFnZSIsInByZXZpb3VzUGFnZSIsImdvVG9JbmRleCIsIm5vIiwicmVuZGVyIiwiaW5uZXJDb250YWluZXIiLCJpIiwicmVuZGVyU2tlbGV0b24iLCJlbGVtZW50IiwidXBwZXJfYm94IiwibG93ZXJfYm94IiwidGl0bGVFbGVtZW50IiwidGl0bGUiLCJjb21tZW50RWxlbWVudCIsInVybEVsZW1lbnQiLCJ1cmxMaW5rIiwiaHJlZiIsInVybCIsInRhcmdldCIsImNvbW1lbnRCb3giLCJjcmVhdGVUZXh0Tm9kZSIsInJlbmRlckRldGFpbFBhZ2UiLCJQYWdlIiwiaW5uZXJfY29udGFpbmVyIiwibmF2aWdhdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwibmV4dF9idG4iLCJwcmV2X2J0biIsImluZGV4IiwiYnRuIiwicmVtb3ZlIiwiY29udGFpbnMiXSwic291cmNlUm9vdCI6IiJ9